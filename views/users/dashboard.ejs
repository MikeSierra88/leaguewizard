<%- include('../partials/header'); -%>
<%- include('../partials/navbar'); -%>
    <div class="jumbotron jumbotron-fluid" id="index-jumbotron">
      <div class="container">
        <h1 class="display-4">League Wizard - Dashboard</h1>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-3">
          <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" 
            aria-orientation="vertical">
            
            <a class="nav-link active" id="v-pills-activeLeagues-tab" 
              data-toggle="pill" href="#v-pills-activeLeagues" role="tab" 
              aria-controls="v-pills-activeLeagues" aria-selected="true">
                Active leagues
            </a>
            <a class="nav-link" id="v-pills-managedLeagues-tab" 
              data-toggle="pill" href="#v-pills-managedLeagues" role="tab" 
              aria-controls="v-pills-managedLeagues" aria-selected="false">
                Managed leagues
            </a>
            <a class="nav-link" id="v-pills-createdLeagues-tab" 
              data-toggle="pill" href="#v-pills-createdLeagues" role="tab" 
              aria-controls="v-pills-createdLeagues" aria-selected="false">
                Owned leagues
            </a>
            <a class="nav-link disabled" id="v-pills-messages-tab" 
              data-toggle="pill" href="#v-pills-messages" role="tab" 
              aria-controls="v-pills-messages" aria-selected="false">
                Archive
            </a>
          </div>
        </div>
        <div class="col-9">
          <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade show active" id="v-pills-activeLeagues" 
              role="tabpanel" aria-labelledby="v-pills-activeLeagues-tab">
              <h2>Active leagues</h2>
                <% allLeagues.forEach((league) => { %>
                <div class="col mb-4">
                  <div class="card shadow-sm bg-white rounded">
                    <div class="card-body">
                      <h5 class="card-title"><%= league.name %></h5>
                      <div class="row">
                        <div class="col-xl-4"><%= league.teams.length %> teams</div>
                        <div class="col-xl-4"><%= league.matches.length %> matches</div>
                        <div class="col-xl-4 floaty-row-center"><a class="btn btn-primary" href="/leagues/<%=league._id%>">Details</a></div>
                      </div>
                    </div>
                  </div>
                </div>
                <% }); %>
            </div>
            <div class="tab-pane fade" id="v-pills-managedLeagues" role="tabpanel" 
            aria-labelledby="v-pills-managedLeagues-tab">
              <h2>Managed leagues</h2>
              <div class="row-cols-1">
                <% myLeagues.forEach((league) => { %>
                <div class="col mb-4">
                  <div class="card shadow-sm bg-white rounded">
                    <div class="card-body">
                      <h5 class="card-title"><%= league.name %></h5>
                      <div class="row">
                        <div class="col-xl-4"><%= league.teams.length %> teams</div>
                        <div class="col-xl-4"><%= league.matches.length %> matches</div>
                        <div class="col-xl-4 floaty-row-center">
                          <a class="btn btn-primary" href="/leagues/<%=league._id%>">Details</a>
                          <a class="btn btn-primary ml-2" href="">Admin</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <% }); %>
              </div>
                
            </div>
            <div class="tab-pane fade" id="v-pills-createdLeagues" role="tabpanel" 
              aria-labelledby="v-pills-createdLeagues-tab">
              <h2>Owned leagues</h2>
              <div class="row-cols-1">
                <% myLeagues.forEach((league) => { %>
                <div class="col mb-4">
                  <div class="card shadow-sm bg-white rounded">
                    <div class="card-body">
                      <h5 class="card-title"><%= league.name %></h5>
                      <div class="row">
                        <div class="col-xl-4"><%= league.teams.length %> teams</div>
                        <div class="col-xl-4"><%= league.matches.length %> matches</div>
                        <div class="col-xl-4 floaty-row-center">
                          <a class="btn btn-primary" href="/leagues/<%=league._id%>">Details</a>
                          <a class="btn btn-primary ml-2" href="">Admin</a>
                          <span role="button" class="btn btn-danger btn-sm ml-2" 
                              data-toggle="modal" data-target="#deleteConfirmModal"
                              data-deletetype="league"
                              data-league="<%=league._id%>"
                              data-leaguename="<%=league.name%>">
                                  <i class="fas fa-trash-alt"></i>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <% }); %>
              </div>
            </div>
            <!-- TBD: Archived leagues -->
            <!--<div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab"><h2>Archived leagues</h2></div>-->
          </div>
        </div>
      </div>
    </div>
<%- include('../partials/footer'); -%>